<Schema name="ojbc_booking_analytics_demo">	

	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Race">
		<Hierarchy name="Race" visible="true" hasAll="true" primaryKey="PersonRaceTypeID" caption="Race">
			<Table name="PersonRaceType"/>
			<Level name="Race" visible="true" table="PersonRaceType" column="PersonRaceTypeDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Sex">
		<Hierarchy name="Sex" visible="true" hasAll="true" primaryKey="PersonSexTypeID" caption="Race">
			<Table name="PersonSexType"/>
			<Level name="Sex" visible="true" table="PersonSexType" column="PersonSexTypeDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="Ethnicity">
		<Hierarchy name="Ethnicity" visible="true" hasAll="true" primaryKey="PersonEthnicityTypeID" caption="Race">
			<Table name="PersonEthnicityType"/>
			<Level name="Ethnicity" visible="true" table="PersonEthnicityType" column="PersonEthnicityTypeDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	
	<Dimension type="StandardDimension" visible="true" highCardinality="false" name="ChargeClass">
		<Hierarchy name="ChargeClass" visible="true" hasAll="true" primaryKey="ChargeClassTypeID" caption="Charge Class">
			<Table name="ChargeClassType"/>
			<Level name="ChargeClass" visible="true" table="ChargeClassType" column="ChargeClassTypeDescription" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"/>
		</Hierarchy>
	</Dimension>
	
	<Cube name="Booking">
		<View alias="Booking">
			<SQL dialect="mysql">
        <![CDATA[select JailEpisodeID, PersonRaceTypeID, PersonSexTypeID, PersonEthnicityTypeID from JailEpisode, Person where JailEpisode.PersonID=Person.PersonID]]>
			</SQL>
		</View>
		<DimensionUsage source="Race" name="Race" visible="true" foreignKey="PersonRaceTypeID" highCardinality="false"/>
		<DimensionUsage source="Sex" name="Sex" visible="true" foreignKey="PersonSexTypeID" highCardinality="false"/>
		<DimensionUsage source="Ethnicity" name="Ethnicity" visible="true" foreignKey="PersonEthnicityTypeID" highCardinality="false"/>
 		<Measure name="Booking Count" column="JailEpisodeID" aggregator="count"/>
	</Cube>
			
	<Cube name="Booking-Charge">
		<View alias="BookingCharge">
			<SQL dialect="mysql">
        <![CDATA[select JailEpisode.JailEpisodeID, PersonRaceTypeID, PersonSexTypeID, PersonEthnicityTypeID, ChargeClassTypeID
        	from JailEpisodeCharge, JailEpisodeArrest, JailEpisode, Person
        	where JailEpisodeCharge.JailEpisodeArrestID=JailEpisodeArrest.JailEpisodeArrestID and
        		JailEpisodeArrest.JailEpisodeID=JailEpisode.JailEpisodeID and JailEpisode.PersonID=Person.PersonID]]>
			</SQL>
		</View>
		<DimensionUsage source="Race" name="Race" visible="true" foreignKey="PersonRaceTypeID" highCardinality="false"/>
		<DimensionUsage source="Sex" name="Sex" visible="true" foreignKey="PersonSexTypeID" highCardinality="false"/>
		<DimensionUsage source="Ethnicity" name="Ethnicity" visible="true" foreignKey="PersonEthnicityTypeID" highCardinality="false"/>
		<DimensionUsage source="ChargeClass" name="Charge Class" visible="true" foreignKey="ChargeClassTypeID" highCardinality="false"/>
 		<Measure name="Charge Count" column="JailEpisodeID" aggregator="count"/>
	</Cube>
			
</Schema>